{"version":3,"file":"ctp-ecom-library.umd.min.js","sources":["../src/utils/utils.js","../src/directive.data/filterIo.core.js"],"sourcesContent":["/**\n * getObjectValueFromString - Process and returns the value of the property found from given string\n *\n * @param  {object} o object to look at\n * @param  {string} s string to process\n * @return {type}     returns the value of property found from the given string\n */\n\n/* eslint-disable */\nexport function getObjectValueFromString(o, s) {\n  s = s.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties\n  s = s.replace(/^\\./, ''); // strip a leading dot\n  const a = s.split('.');\n  for (let i = 0, n = a.length; i < n; i+=1) {\n    const k = a[i];\n    if (k in o) {\n      o = o[k];\n    } else {\n      return;\n    }\n  }\n  return o;\n}\n/* eslint-enable */\n\n\n/**\n * isInArray - Returns true if the element is found in the array.\n *\n * @param  {string}  el        Item property string retrieved from the list of properties from each item\n * @param  {string}  flt       Filter string retrieved from the list of filters\n * @param  {boolean} isPartial Filters partially when true, or exact otherwise\n * @return {boolean}           Returns true if the element is found in the array\n */\nexport function isInArray(el, flt, isPartial) {\n  return isPartial ? el.indexOf(flt) > -1 : el === flt;\n}\n\nexport function getObjectFromArray(arr) {\n  const obj = {};\n\n  arr.forEach((el) => {\n    obj[el.type] = el;\n  });\n\n  return obj;\n}\n\n\n/**\n * getLowrCaseOrNumber - Returns the same value, but converted into float if number, or lowercase if string\n * This is to facilitate the comparission\n *\n * @param  {any} value to process\n * @return {type} processed value\n */\nexport function getLowerCaseOrNumber(el) {\n  if (typeof el === 'number') {\n    return parseFloat(el);\n  }\n\n  if (typeof el === 'string') {\n    // eslint-disable-next-line\n    return isNaN(el) ? el.toLowerCase() : parseFloat(el);\n  }\n\n  return el;\n}\n\n/**\n * atLeastOneMatch - Returns true if 1 of the elements matches the criteria\n *\n * @param  {array}   filters    List of filters match against\n * @param  {string}  el         Element to look for in the filters array\n * @param  {boolean} isPartial  If true, the match rule will be equal|contained in. If false, it'll be equal.\n * @return {boolean}            Returns boolean for element found condition\n */\nexport function atLeastOneMatch(fltrs, element, isPartial) {\n  let counter = 0;\n  let filters = fltrs;\n  let el = element;\n\n  // Unify filters. Make it an array if it isn't yet\n  if (!Array.isArray(fltrs)) {\n    filters = [fltrs];\n  }\n\n  filters.forEach((filter) => {\n    let flt = filter;\n    // VALIDATIONS\n\n    flt = getLowerCaseOrNumber(flt);\n    el = getLowerCaseOrNumber(el);\n\n    if (typeof el !== typeof flt) {\n      return;\n    }\n\n    if (el === flt) {\n      counter += 1;\n      return;\n    }\n\n    if (!filters.length || (el && el.length && isInArray(el, flt, isPartial))) {\n      counter += 1;\n      // eslint-disable-next-line\n      return;\n    }\n  });\n\n  return !!counter;\n}\n\nexport function testStuff() {\n  console.log('testStuff');\n}\n","import * as Utils from '../utils/utils';\n\n/**\n * var getFiltredCollection - Filters given array against given filters.\n *\n * @param  {array} items   Array to loop through\n * @param  {array} filters Filters to be used to remove or not elements from the resulting array\n * @return {array}         Final filtred array\n */\nfunction getFiltredCollection(items, filters, isPartial) {\n  if (!filters || !filters.length) { return items; }\n\n  return items.filter((j) => {\n    let ioObjectMatchingCounter = 0;\n\n    return j.data.io.filter((item) => {\n      filters.forEach((filterUnit) => {\n        let filtersMatchingCounter = 0;\n        const filterKeys = Object.keys(filterUnit);\n\n        filterKeys.forEach((key) => {\n          let propInItem = item[key] || undefined;\n\n          if (!item[key] && Utils.getObjectValueFromString(item, key) !== undefined) {\n            // console.log('Utils item', item);\n            // console.log('Utils key', key);\n            propInItem = Utils.getObjectValueFromString(item, key);\n          }\n\n          if (key === 'undefined' || filterUnit[key] === 'undefined') {\n            return;\n          }\n\n          if (propInItem && Utils.atLeastOneMatch(filterUnit[key], propInItem, isPartial)) {\n            filtersMatchingCounter += 1;\n          }\n\n          // eslint-disable-next-line\n          return;\n        });\n\n        if (filtersMatchingCounter === filterKeys.length) {\n          ioObjectMatchingCounter += 1;\n        }\n      });\n\n      return ioObjectMatchingCounter === filters.length;\n    }).length > 0;\n  });\n}\n\nconst FilterIoCore = {\n  getFiltredCollection,\n};\n\nexport default FilterIoCore;\n"],"names":["getObjectValueFromString","o","s","a","replace","split","i","n","length","k","isInArray","el","flt","isPartial","indexOf","getLowerCaseOrNumber","parseFloat","isNaN","toLowerCase","atLeastOneMatch","fltrs","element","counter","filters","Array","isArray","forEach","filter","arr","obj","type","log","FilterIoCore","items","j","ioObjectMatchingCounter","data","io","item","filterUnit","filtersMatchingCounter","filterKeys","Object","keys","key","propInItem","undefined","Utils"],"mappings":"mMASA,SAAgBA,EAAyBC,EAAGC,OAIrC,IADCC,QAFFD,EAAEE,QAAQ,aAAc,QACtBA,QAAQ,MAAO,KACTC,MAAM,KACTC,EAAI,EAAGC,EAAIJ,EAAEK,OAAQF,EAAIC,EAAGD,GAAG,EAAG,KACnCG,EAAIN,EAAEG,QACRG,KAAKR,YACHA,EAAEQ,UAKHR,EAaT,SAAgBS,EAAUC,EAAIC,EAAKC,UAC1BA,EAAYF,EAAGG,QAAQF,IAAQ,EAAID,IAAOC,EAqBnD,SAAgBG,EAAqBJ,SACjB,iBAAPA,EACFK,WAAWL,GAGF,iBAAPA,EAEFM,MAAMN,GAAMA,EAAGO,cAAgBF,WAAWL,GAG5CA,EAWT,SAAgBQ,EAAgBC,EAAOC,EAASR,OAC1CS,EAAU,EACVC,EAAUH,EACVT,EAAKU,SAGJG,MAAMC,QAAQL,QACNA,MAGLM,QAAQ,SAACC,OACXf,EAAMe,IAGJZ,EAAqBH,gBACtBG,EAAqBJ,kBAEfA,gBAAcC,gBAAAA,MAIrBD,IAAOC,IAKNW,EAAQf,QAAWG,GAAMA,EAAGH,QAAUE,EAAUC,EAAIC,EAAKC,SACjD,MALA,OAWNS,wrCAxEX,SAAmCM,OAC3BC,cAEFH,QAAQ,SAACf,KACPA,EAAGmB,MAAQnB,IAGVkB,sDAoET,mBACUE,IAAI,iBC/DRC,wBA1CN,SAA8BC,EAAOV,EAASV,UACvCU,GAAYA,EAAQf,OAElByB,EAAMN,OAAO,SAACO,OACfC,EAA0B,SAEvBD,EAAEE,KAAKC,GAAGV,OAAO,SAACW,YACfZ,QAAQ,SAACa,OACXC,EAAyB,EACvBC,EAAaC,OAAOC,KAAKJ,KAEpBb,QAAQ,SAACkB,OACdC,EAAaP,EAAKM,SAAQE,EAEzBR,EAAKM,SAAsDE,IAA9CC,EAA+BT,EAAMM,OAGxCG,EAA+BT,EAAMM,IAGxC,cAARA,GAA2C,cAApBL,EAAWK,IAIlCC,GAAcE,EAAsBR,EAAWK,GAAMC,EAAYhC,QACzC,KAO1B2B,IAA2BC,EAAWjC,YACb,KAIxB2B,IAA4BZ,EAAQf,SAC1CA,OAAS,IArC4ByB"}