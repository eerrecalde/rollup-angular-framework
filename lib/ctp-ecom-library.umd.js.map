{"version":3,"file":"ctp-ecom-library.umd.js","sources":["../src/utils/utils.js","../src/directive.data/filterIo.core.js"],"sourcesContent":["/**\n * getObjectValueFromString - Process and returns the value of the property found from given string\n *\n * @param  {object} o object to look at\n * @param  {string} s string to process\n * @return {type}     returns the value of property found from the given string\n */\n\n/* eslint-disable */\nexport function getObjectValueFromString(o, s) {\n  s = s.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties\n  s = s.replace(/^\\./, ''); // strip a leading dot\n  const a = s.split('.');\n  for (let i = 0, n = a.length; i < n; i+=1) {\n    const k = a[i];\n    if (k in o) {\n      o = o[k];\n    } else {\n      return;\n    }\n  }\n  return o;\n}\n/* eslint-enable */\n\n\n/**\n * isInArray - Returns true if the element is found in the array.\n *\n * @param  {string}  el        Item property string retrieved from the list of properties from each item\n * @param  {string}  flt       Filter string retrieved from the list of filters\n * @param  {boolean} isPartial Filters partially when true, or exact otherwise\n * @return {boolean}           Returns true if the element is found in the array\n */\nexport function isInArray(el, flt, isPartial) {\n  return isPartial ? el.indexOf(flt) > -1 : el === flt;\n}\n\nexport function getObjectFromArray(arr) {\n  const obj = {};\n\n  arr.forEach((el) => {\n    obj[el.type] = el;\n  });\n\n  return obj;\n}\n\n\n/**\n * getLowrCaseOrNumber - Returns the same value, but converted into float if number, or lowercase if string\n * This is to facilitate the comparission\n *\n * @param  {any} value to process\n * @return {type} processed value\n */\nexport function getLowerCaseOrNumber(el) {\n  if (typeof el === 'number') {\n    return parseFloat(el);\n  }\n\n  if (typeof el === 'string') {\n    // eslint-disable-next-line\n    return isNaN(el) ? el.toLowerCase() : parseFloat(el);\n  }\n\n  return el;\n}\n\n/**\n * atLeastOneMatch - Returns true if 1 of the elements matches the criteria\n *\n * @param  {array}   filters    List of filters match against\n * @param  {string}  el         Element to look for in the filters array\n * @param  {boolean} isPartial  If true, the match rule will be equal|contained in. If false, it'll be equal.\n * @return {boolean}            Returns boolean for element found condition\n */\nexport function atLeastOneMatch(fltrs, element, isPartial) {\n  let counter = 0;\n  let filters = fltrs;\n  let el = element;\n\n  // Unify filters. Make it an array if it isn't yet\n  if (!Array.isArray(fltrs)) {\n    filters = [fltrs];\n  }\n\n  filters.forEach((filter) => {\n    let flt = filter;\n    // VALIDATIONS\n\n    flt = getLowerCaseOrNumber(flt);\n    el = getLowerCaseOrNumber(el);\n\n    if (typeof el !== typeof flt) {\n      return;\n    }\n\n    if (el === flt) {\n      counter += 1;\n      return;\n    }\n\n    if (!filters.length || (el && el.length && isInArray(el, flt, isPartial))) {\n      counter += 1;\n      // eslint-disable-next-line\n      return;\n    }\n  });\n\n  return !!counter;\n}\n\nexport function testStuff() {\n  console.log('testStuff');\n}\n","import * as Utils from '../utils/utils';\n\n/**\n * var getFiltredCollection - Filters given array against given filters.\n *\n * @param  {array} items   Array to loop through\n * @param  {array} filters Filters to be used to remove or not elements from the resulting array\n * @return {array}         Final filtred array\n */\nexport default function getFiltredCollection(items, filters, isPartial) {\n  if (!filters || !filters.length) { return items; }\n\n  return items.filter((j) => {\n    let ioObjectMatchingCounter = 0;\n\n    return j.data.io.filter((item) => {\n      filters.forEach((filterUnit) => {\n        let filtersMatchingCounter = 0;\n        const filterKeys = Object.keys(filterUnit);\n\n        filterKeys.forEach((key) => {\n          let propInItem = item[key] || undefined;\n\n          if (!item[key] && Utils.getObjectValueFromString(item, key) !== undefined) {\n            // console.log('Utils item', item);\n            // console.log('Utils key', key);\n            propInItem = Utils.getObjectValueFromString(item, key);\n          }\n\n          if (key === 'undefined' || filterUnit[key] === 'undefined') {\n            return;\n          }\n\n          if (propInItem && Utils.atLeastOneMatch(filterUnit[key], propInItem, isPartial)) {\n            filtersMatchingCounter += 1;\n          }\n\n          // eslint-disable-next-line\n          return;\n        });\n\n        if (filtersMatchingCounter === filterKeys.length) {\n          ioObjectMatchingCounter += 1;\n        }\n      });\n\n      return ioObjectMatchingCounter === filters.length;\n    }).length > 0;\n  });\n}\n\n// export default { FilterIoCore: getFiltredCollection };\n"],"names":["getObjectValueFromString","o","s","replace","a","split","i","n","length","k","isInArray","el","flt","isPartial","indexOf","getObjectFromArray","arr","obj","forEach","type","getLowerCaseOrNumber","parseFloat","isNaN","toLowerCase","atLeastOneMatch","fltrs","element","counter","filters","Array","isArray","filter","testStuff","log","getFiltredCollection","items","j","ioObjectMatchingCounter","data","io","item","filterUnit","filtersMatchingCounter","filterKeys","Object","keys","key","propInItem","undefined","Utils"],"mappings":"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"}